
<div class="container">
    <div class="row">
        <div class="col-md-4">
            <ul class="nav flex-column">
                <li class="nav-item">
                  <a class="nav-link active" [routerLink] = "['/dashboard']">Dashboard </a>
                </li>
                <li class="nav-item">
                  <a class="nav-link active" [routerLink] = "['/my-page']">My page</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" [routerLink] = "['/users']">Users</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" [routerLink] = "['/login']" style="color:black">Log out</a>
                </li>
              </ul>
        </div>
        <div class="col-md-8">
            <div class="newBtn">
                <button class="btn btn-success"(click)="openModal(template)">Add new user</button>
            </div>
            <ng-template #template>
                <div class="modal-header">
                  <h4 class="modal-title pull-left">Add new user</h4>
                  <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <form #newUserForm = 'ngForm' (ngSubmit) = addUser()>
                    <div class="modal-body">
                        <div class="form-group">
                            <label>Name:</label>
                            <input type="text" 
                                class="form-control"  
                                [(ngModel)]="newUser.name" 
                                required 
                                #name='ngModel'
                                pattern="^[a-z]{1,23}$"
                                name="newName">
                        </div>
                        <div *ngIf="name.invalid && name.touched">
                            <small> Name invalid</small>
                        </div>
                        <div class="form-group">
                            <label>Email:</label>
                            <input type="email" 
                                class="form-control" 
                                name="newEmail" 
                                [(ngModel)]="newUser.email"
                                pattern="[^@]+@[^\.]+\..+"
                                #email='ngModel'
                                required>
                        </div>
                        <div *ngIf="email.invalid && email.touched">
                            <small> Email invalid</small>
                        </div>
                        <div class="form-group">
                            <label>Password:</label>
                            <input type="password" 
                                class="form-control" 
                                name="newPassword" 
                                [(ngModel)]="newUser.password"
                                required
                                minlength="5"
                                #password='ngModel'>
                        </div>
                        <div *ngIf="password.invalid && password.touched">
                            <small> Password invalid</small>
                        </div>
                        <div class="newBtn">
                            <button type="submit" 
                                [disabled] = 'newUserForm.invalid' 
                                class="btn btn-warning"
                                (click)="modalRef.hide()">Add</button>
                        </div>
                    </div>
                </form>
              </ng-template>
            <table class="table">
                <thead>
                  <tr>
                    <th scope="col">#</th>
                    <th scope="col">Name</th>
                    <th scope="col">Email</th>
                    <th scope="col">Created at</th>
                    <th scope="col">Updated at</th>
                  </tr>
                </thead>
                <tbody>
                  <tr  *ngFor="let user of users">
                    <th>{{user.id}}</th>
                    <td>{{user.name}}</td>
                    <td>{{user.email}}</td>
                    <td>{{user.created_at | date:'yyyy/LL/dd'}}</td>
                    <td>{{user.updated_at | date:'yyyy/LL/dd'}}</td>
                  </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>